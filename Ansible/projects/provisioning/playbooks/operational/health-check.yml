---
# playbooks/operational/health-check.yml - System health and connectivity validation

- name: WALLIX Bastion - Health Check
  hosts: bastions
  gather_facts: no

  tasks:
    - name: Authenticate for health check
      include_role:
        name: wallix.bastion.auth
      vars:
        wallix_bastion_api_version: "api"

    - name: Check API connectivity
      debug:
        msg:
          - "âœ… Bastion: {{ wallix_bastion_host }}"
          - "Session: {{ 'Valid' if wallix_session_cookie is defined else 'Invalid' }}"
          - "API Status: Available"
